<?php

namespace AppBundle\Entity;
use Symfony\Component\Validator\Constraints as Assert;
use Doctrine\ORM\Mapping as ORM;
use Doctrine\ORM\Query\Expr;

/**
 * @ORM\Entity
 * @ORM\Table(name="Teachers")
 */
class Pupils
{
    private $_doctrine = null;
    public function __construct($doctrine)
    {
        $this->_doctrine = $doctrine;
    }

    /**
     * @ORM\Column(type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length=100)
     * @Assert\NotBlank(
     *     message = "Имя обязательно для ввода"
     * )
     */
    protected $name;

    /**
     * @ORM\Column(type="string", length=50)
     * @Assert\NotBlank(
     *     message = "Почта обязательна для ввода"
     * )
     * @Assert\Email(
     *     message = "Введите корректно электронную почту"
     * )
     */
    protected $email;

    /**
     * @ORM\Column(type="integer")
     */
    protected $date_birth;

    /**
     * @ORM\Column(type="smallint")
     * @Assert\Type(
     *     type="integer",
     *     message = "Выеберите корректно уровень"
     * )
     */
    protected $level_id;


    /*
     * Assert\IsTrue(message = "Данная почта уже используется, введите другое") - не работает (переделал)
     * */
    public function isUsedEmail($email)
    {
        return (bool)$this->_doctrine->getRepository('AppBundle:Pupils')->findOneByName($email);
    }

}
